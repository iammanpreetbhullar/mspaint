/*! jspaint 2016-10-28 Anubhav Saini (c) 2015-2016 */
"function"!=typeof Object.assign&&!function(){Object.assign=function(a){"use strict";if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}return b}}();var generateSliderString=function(a){var b=a.min,c=a.max,d=a.title,e=a.id,f=a.step;return'<input id="'+e+'" type="range" min="'+b+'" max="'+c+'" step="'+f+'" title="'+d+'" />'},generateLabelString=function(a){var b=a.hexColor,c=a.fontSize;return'<label style="color: #'+b+"; font-size: "+c+';"></label>'},TOOLS={CONSTANTS:{MandelbrotFractal:{id:"MandelbrotFractalTool",selectionId:"#MandelbrotFractalTool",class:"main-tool",title:"Click to draw Mandelbrot Fractal. Click again to disable.",maxHeight:-1,maxWidth:-1},Pencil:{id:"PencilTool",selectionId:"#PencilTool",class:"main-tool",title:"Click to draw free-hand lines. Click again to disable."},PickColor:{id:"pick-color",selectionId:"#pick-color",class:"string-menu-item",containerId:"PickColorTool",title:"Click to pick color under mouse pointer tip; picks until some other tool is selected. Click again to disable."},PivotedLinePattern:{id:"PivotedLinePatternTool",selectionId:"#PivotedLinePatternTool",class:"main-tool",title:"Click to draw amazing pattern. Click again to disable.",ACTIONS:{pivots:"pivots",Ydrops:"drops",godRays:"god-rays",Xextends:"extends"}},Rectangle:{id:"RectangleTool",selectionId:"#RectangleTool",class:"main-tool",title:"Click to draw rectangles. Click again to disable.",previewId:"previewRectangle"},Ring:{id:"RingTool",selectionId:"#RingTool",class:"main-tool",title:"Click to draw ring. Click again to disable.",previewId:"previewRing",previewOuterId:"previewOuterRing"},Disc:{id:"DiscTool",selectionId:"#DiscTool",class:"main-tool",title:"Click to draw disc. Click again to disable.",previewId:"previewDisc"},Square:{id:"SquareTool",selectionId:"#SquareTool",class:"main-tool",title:"Click to draw squares. Click again to disable.",previewId:"previewSquare"},Circle:{id:"CircleTool",selectionId:"#CircleTool",class:"main-tool",title:"Click to draw circle. Click again to disable.",previewId:"previewCircle"},PointWalker:{id:"PointWalkerTool",selectionId:"#PointWalkerTool",class:"main-tool",title:"Click to draw random point walker. Click again to disable."},FamilyPointWalker:{id:"FamilyPointWalkerTool",selectionId:"#FamilyPointWalkerTool",class:"main-tool",title:"Click to draw family random point walker. Click again to disable."},OrganismPointWalker:{id:"OrganismPointWalkerTool",selectionId:"#OrganismPointWalkerTool",class:"main-tool",title:"Click to draw organism random point walker. Click again to disable."},UniCellularParasiteTool:{id:"UniCellularParasiteTool",selectionId:"#UniCellularParasiteTool",class:"main-tool",title:"Click to create a parasite. Click again to disable."}},VARIABLES:{MandelbrotFractal:{iterations:1e3,xMax:1,yMax:1,xMin:-2,yMin:-1,height:-1,width:-1},Pencil:{width:2,LastPoint:{X:-1,Y:-1}},PivotedLinePattern:{width:2,LastPoint:{X:-1,Y:-1}},Rectangle:{length:20,breadth:10,xyPlaneRotationAngle:360},Ring:{innerRadius:10,outerRadius:20},Disc:{radius:10},Square:{side:10,xyPlaneRotationAngle:360},Circle:{innerRadius:10},PointWalker:{steps:100},FamilyPointWalker:{steps:100,durationBetweenDanceStepsInMiliSeconds:100},OrganismPointWalker:{steps:100,durationBetweenDanceStepsInMiliSeconds:100},UniCellularParasiteTool:{steps:1,durationBetweenParasiticActsInMiliSeconds:100,dieOutSteps:1e4}}},MandelbrotFractal={CONSTANTS:TOOLS.CONSTANTS.MandelbrotFractal,VARIABLES:TOOLS.VARIABLES.MandelbrotFractal},Pencil={CONSTANTS:TOOLS.CONSTANTS.Pencil,VARIABLES:TOOLS.VARIABLES.Pencil},PickColor={CONSTANTS:TOOLS.CONSTANTS.PickColor},PivotedLinePattern={CONSTANTS:TOOLS.CONSTANTS.PivotedLinePattern,VARIABLES:TOOLS.VARIABLES.PivotedLinePattern},Rectangle={CONSTANTS:TOOLS.CONSTANTS.Rectangle,VARIABLES:TOOLS.CONSTANTS.Rectangle},Ring={CONSTANTS:TOOLS.CONSTANTS.Ring,VARIABLES:TOOLS.VARIABLES.Ring},Disc={CONSTANTS:TOOLS.CONSTANTS.Disc,VARIABLES:TOOLS.VARIABLES.Disc},Square={CONSTANTS:TOOLS.CONSTANTS.Square,VARIABLES:TOOLS.VARIABLES.Square},Circle={CONSTANTS:TOOLS.CONSTANTS.Circle,VARIABLES:TOOLS.VARIABLES.Circle},PointWalker={CONSTANTS:TOOLS.CONSTANTS.PointWalker,VARIABLES:TOOLS.VARIABLES.PointWalker},FamilyPointWalker={CONSTANTS:TOOLS.CONSTANTS.FamilyPointWalker,VARIABLES:TOOLS.VARIABLES.FamilyPointWalker},OrganismPointWalker={CONSTANTS:TOOLS.CONSTANTS.OrganismPointWalker,VARIABLES:TOOLS.VARIABLES.OrganismPointWalker},UniCellularParasiteTool={CONSTANTS:TOOLS.CONSTANTS.UniCellularParasiteTool,VARIABLES:TOOLS.VARIABLES.UniCellularParasiteTool};$(function(){"use strict";function a(a){var b=new FileReader;b.onload=function(a){var b=new Image;b.onload=function(){context.drawImage(b,0,0)},b.src=a.target.result},b.readAsDataURL(a.target.files[0])}function b(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=0;e<d.data.length;e+=4)d.data[e]=255;context.putImageData(d,0,0)}function c(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=1;e<d.data.length;e+=4)d.data[e]=255;context.putImageData(d,0,0)}function d(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=2;e<d.data.length;e+=4)d.data[e]=255;context.putImageData(d,0,0)}function e(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=0;e<d.data.length;e+=4)d.data[e]=255-d.data[e],d.data[e+1]=255-d.data[e+1],d.data[e+2]=255-d.data[e+2];context.putImageData(d,0,0)}function f(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=0;e<d.data.length;e+=4)d.data[e]=0;context.putImageData(d,0,0)}function g(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=1;e<d.data.length;e+=4)d.data[e]=0;context.putImageData(d,0,0)}function h(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=2;e<d.data.length;e+=4)d.data[e]=0;context.putImageData(d,0,0)}function i(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=0;e<d.data.length;e+=4)d.data[e]+=112,d.data[e+1]+=112,d.data[e+2]+=112;context.putImageData(d,0,0)}function j(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=0;e<d.data.length;e+=4)d.data[e]-=112,d.data[e+1]-=112,d.data[e+2]-=112;context.putImageData(d,0,0)}function k(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b);saveCanvasState({startX:0,startY:0,width:c,height:b});for(var e=0;e<d.data.length;e+=4)d.data[e]+=Math.random()<.5?255*Math.random()*-1:255*Math.random(),d.data[e+1]+=Math.random()<.5?255*Math.random()*-1:255*Math.random(),d.data[e+2]+=Math.random()<.5?255*Math.random()*-1:255*Math.random();context.putImageData(d,0,0)}function l(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b),e=Math.floor(Math.random()*c),f=Math.floor(Math.random()*b),g=d.data[e*c+f],h=d.data[e*c+f+1],i=d.data[e*c+f+2],j=Math.random()<.5?255*Math.random()*-1:255*Math.random(),k=Math.random()<.5?255*Math.random()*-1:255*Math.random(),l=Math.random()<.5?255*Math.random()*-1:255*Math.random();saveCanvasState({startX:0,startY:0,width:c,height:b});for(var m=0;m<d.data.length;m+=4)d.data[m]===g&&d.data[m+1]===h&&d.data[m+2]===i&&(d.data[m]+=j,d.data[m+1]+=k,d.data[m+2]+=l);context.putImageData(d,0,0)}function m(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width();saveCanvasState({startX:0,startY:0,width:c,height:b});for(var d=0;d<255;d++)$("#RandomColorTool").click()}function n(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b),e=0,f=0;saveCanvasState({startX:0,startY:0,width:c,height:b});for(var g=0;g<d.data.length;g+=4)e=(d.data[g]+d.data[g+1]+d.data[g+2])/3,f=e<112?0:255,d.data[g]=f,d.data[g+1]=f,d.data[g+2]=f;context.putImageData(d,0,0)}function o(){var a="#"+CONSTANTS.canvasId,b=$(a).height(),c=$(a).width(),d=context.getImageData(0,0,c,b),e=0,f=0;saveCanvasState({startX:0,startY:0,width:c,height:b});for(var g=0;g<d.data.length;g+=4)e=(d.data[g]+d.data[g+1]+d.data[g+2])/3,f=16*Math.floor(e/16),d.data[g]=f,d.data[g+1]=f,d.data[g+2]=f;context.putImageData(d,0,0)}function p(){var a,b,c="#"+CONSTANTS.canvasId,d=$(c).height(),e=$(c).width(),f=1,g=context.fillStyle;saveCanvasState({startX:0,startY:0,width:e,height:d});for(var h=0;h<Math.floor(e/10);h++)for(var i=0;i<Math.floor(d/10);i++)f=Math.floor(10*Math.random()),a=Math.floor(Math.random()*e),b=Math.floor(Math.random()*d),context.fillStyle="#"+CONSTANTS.basicColors[Math.floor(16*Math.random())].hex,CANVASAPI.fillCirc(a,b,f);context.fillStyle=g}function q(){var a,b,c="#"+CONSTANTS.canvasId,d=$(c).height(),e=$(c).width(),f=context.strokeStyle,g=1;saveCanvasState({startX:0,startY:0,width:e,height:d});for(var h=0;h<Math.floor(e/10);h++)for(var i=0;i<Math.floor(d/10);i++)a=Math.floor(Math.random()*e),b=Math.floor(Math.random()*d),g=Math.floor(10*Math.random()),f="#"+CONSTANTS.basicColors[Math.floor(16*Math.random())].hex,CANVASAPI.drawCircle({X:a,Y:b,innerRadius:g,outerRadius:g+1,strokeColor:f});context.strokeStyle=f}var r={generateSlider:function(a){return $(generateSliderString(a))},generateLabel:function(a){$(generateLabelString(a))},genericLabel:function(){return r.generateLabel({hexColor:"FFFFFF",fontSize:"10px"})},registerEventForTool:function(a){var b=a.toolId,c=$(b),d=a.contextMenu,e=a.constantTitle;setupToolTips(c,e),a.tool=c,c.funcToggle("click",function(){activateTool(a),d.activate(d.getOptions())},function(){d.deactivate(d.getOptions()),deactivateTool(a)})}};$("#image-button").on("change",a);var s={start:function(a){function b(a){function b(a,b,c){for(var d=0,e=0,f=0,g=0,h=0,i=c;i--&&f+g<=4;)h=d*e,f=d*d,g=e*e,d=f-g+a,e=h+h+b;return c-i}function c(a){var c,d,e,f,g,h,i,j=a.context,k=a.XMin,l=a.YMin,m=a.XMax,n=a.YMax,o=a.iterations,p=MandelbrotFractal.VARIABLES.width,q=MandelbrotFractal.VARIABLES.height,r=j.getImageData(0,0,p,q),s=r.data,t=Color.hexToRgb(selectedPrimaryColor);for(c=0;c<p;++c)for(d=0;d<q;++d)e=k+(m-k)*c/(p-1),f=l+(n-l)*d/(q-1),g=b(e,f,o),i=4*(p*d+c),g>o?(s[i]=t.r,s[i+1]=t.g,s[i+2]=t.b):(h=3*Math.log(g)/Math.log(o-1),h<1?(s[i]=255*h,s[i+1]=0,s[i+2]=0):h<2?(s[i]=255,s[i+1]=255*(h-1),s[i+2]=0):(s[i]=255,s[i+1]=255,s[i+2]=255*(h-2))),s[i+3]=255;j.putImageData(r,a.startX,a.startY)}c(a)}var c=a.event,d=a.canvasId,e=function(a){return a+Math.floor(MandelbrotFractal.VARIABLES.width)-MandelbrotFractal.CONSTANTS.maxWidth},f=function(a){var b=Actions.Mouse.getX(a),c=Math.max(b-Math.floor(MandelbrotFractal.VARIABLES.width/2),0),d=e(c);return d>0&&(c-=d),c},g=function(a){return a+Math.floor(MandelbrotFractal.VARIABLES.height)-MandelbrotFractal.CONSTANTS.maxHeight},h=function(a){var b=Actions.Mouse.getY(a),c=Math.max(b-Math.floor(MandelbrotFractal.VARIABLES.height/2),0),d=g(c);return d>0&&(c-=d),c};$(d).on(c,function(a){var c={event:a,relativeTo:$(d)},e=f(c),g=h(c);b({context:context,XMin:MandelbrotFractal.VARIABLES.xMin,XMax:MandelbrotFractal.VARIABLES.xMax,YMin:MandelbrotFractal.VARIABLES.yMin,YMax:MandelbrotFractal.VARIABLES.yMax,iterations:MandelbrotFractal.VARIABLES.iterations,startX:e,startY:g})})},stop:function(a){$(a.canvasId).off(a.event)},ContextMenu:{activate:function(a){function b(a,b,c,d){return r.generateSlider({id:a,min:b,max:c,step:1,title:d})}function c(a){function c(a){var c=b("mandelbrotIterations","10",a.maxIterationsAllowed,"Iterations for mandelbrot fractal generation. Beware! If higher values are used, it might crash your browser.").attr("value",MandelbrotFractal.VARIABLES.iterations).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){var b=$(this).val();b>a.maxIterationsAllowed&&confirm("Beware! It might crash your browser. Go back?","back","No, I want these many iterations. I know what I am doing!")&&(b=a.maxIterationsAllowed),MandelbrotFractal.VARIABLES.iterations=b});return c}var d=r.genericLabel().append(a.iterationLabel).append(c(a));return d}function d(a){function c(a){var c=b("mandelbrotHeight","100",MandelbrotFractal.CONSTANTS.maxHeight,"Height for mandelbrot fractal generation.").attr("value",MandelbrotFractal.CONSTANTS.maxHeight).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){var a=$(this).val();a>MandelbrotFractal.CONSTANTS.maxHeight&&(a=MandelbrotFractal.CONSTANTS.maxHeight),MandelbrotFractal.VARIABLES.height=a});return c}var d=r.genericLabel().append(a.heightLabel).append(c(a));return d}function e(a){function c(a){var c=b("mandelbrotWidth","100",MandelbrotFractal.CONSTANTS.maxWidth,"Width for mandelbrot fractal generation.").attr("value",MandelbrotFractal.CONSTANTS.maxWidth).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){var a=$(this).val();a>MandelbrotFractal.CONSTANTS.maxWidth&&(a=MandelbrotFractal.CONSTANTS.maxWidth),MandelbrotFractal.VARIABLES.width=a});return c}var d=r.genericLabel().append(a.widthLabel).append(c(a));return d}function f(a){function c(a){var c=b("mandelbrotXMax","0","3","XMax for mandelbrot fractal generation.").attr("value","1").attr("disabled","disabled").on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){MandelbrotFractal.VARIABLES.xMax=$(this).val()});return c}var d=r.genericLabel().append(a.xMaxLabel).append(c(a));return d}function g(a){function c(a){var c=b("mandelbrotYMax","0","3","YMax for mandelbrot fractal generation.").attr("value","1").attr("disabled","disabled").on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){MandelbrotFractal.VARIABLES.yMax=$(this).val()});return c}var d=r.genericLabel().append(a.yMaxLabel).append(c(a));return d}function h(a){function c(a){var c=b("mandelbrotXMin","-3","1","XMin for mandelbrot fractal generation.").attr("value","-2").attr("disabled","disabled").on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){MandelbrotFractal.VARIABLES.xMin=$(this).val()});return c}var d=r.genericLabel().append(a.xMinLabel).append(c(a));return d}function i(a){function c(a){var c=b("mandelbrotYMin","-2","1","YMin for mandelbrot fractal generation.").attr("value","-1").attr("disabled","disabled").on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){MandelbrotFractal.VARIABLES.yMin=$(this).val()});return c}var d=r.genericLabel().append(a.yMinLabel).append(c(a));return d}var j=$("<div></div>").attr("id",a.id).addClass("menu-item");j.append(c(a)),j.append(d(a)),j.append(e(a)),j.append(f(a)),j.append(g(a)),j.append(h(a)),j.append(i(a)),j.appendTo($(a.containerSelectionCriterion))},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"MandelbrotFractalContextMenu",containerSelectionCriterion:".contextual-tool-bar",maxIterationsAllowed:2e3,minIterationsAllowed:10,iterationLabel:"Iterations: ",maxHeightAllowed:MandelbrotFractal.VARIABLES.maxHeight,heightLabel:"Height: ",maxWidthAllowed:MandelbrotFractal.VARIABLES.maxWidth,widthLabel:"Width: ",xMaxLabel:"XMax: ",yMaxLabel:"YMax: ",xMinLabel:"XMin: ",yMinLabel:"YMin: "}}},Events:{register:function(a){var b=a.toolId,c=$(b),d=MandelbrotFractal.ContextMenu;setupToolTips(c,MandelbrotFractal.CONSTANTS.title),a.tool=c,c.funcToggle("click",function(){activateTool(a),MandelbrotFractal.VARIABLES.height=MandelbrotFractal.CONSTANTS.maxHeight=$(a.canvasId)[0].height,MandelbrotFractal.VARIABLES.width=MandelbrotFractal.CONSTANTS.maxWidth=$(a.canvasId)[0].width,d.activate(d.getOptions())},function(){d.deactivate(d.getOptions()),deactivateTool(a)})}}},t={start:function(a){var b=a.event,c="#"+a.canvasId,d=null,e=null,f=null,g=null,h=null,i={get:function(){return{X:Pencil.VARIABLES.LastPoint.X,Y:Pencil.VARIABLES.LastPoint.Y}},set:function(a,b){Pencil.VARIABLES.LastPoint.X=a,Pencil.VARIABLES.LastPoint.Y=b}};$(c).on(b,function(a){d={event:a,relativeTo:$(this)};var b=function(){e=Actions.Mouse.getX(d),f=Actions.Mouse.getY(d),g=Pencil.VARIABLES.width,h=i.get(),h.X!=-1&&CANVASAPI.drawLineSegmentFromLastPoint({context:context,last:h,current:{X:e,Y:f},width:g}),i.set(e,f)};void 0!==a.buttons&&(1===a.buttons?b():(Pencil.VARIABLES.LastPoint.X=-1,Pencil.VARIABLES.LastPoint.Y=-1))})},stop:function(a){var b=a.event||CONSTANTS.Events.mousemove,c="#"+(a.canvasId||CONSTANTS.canvasId);$(c).off(b)},ContextMenu:{activate:function(a){function b(){return r.generateSlider({id:"widthPencil",min:1,max:200,step:1,title:"Width for pencil tool."})}function c(a){var c=$("<div></div>").attr("id",a.id).addClass("menu-item");b().attr("value",Pencil.VARIABLES.width).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){Pencil.VARIABLES.width=$(this).val()}).appendTo(c);c.appendTo($(a.containerSelectionCriterion))}c(a)},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"PencilContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}}},u={ContextMenu:{activate:function(){},deactivate:function(){},getOptions:function(){}},start:function(a){var b=a.event,c="#"+a.canvasId,d=null,e=null,f=null,g=null,h=0,i=0,j=0,k=0;$(c).on(b,function(a){d={event:a,relativeTo:$(this)},e=Actions.Mouse.getX(d),f=Actions.Mouse.getY(d),g=context.getImageData(e-.5,f-.5,e+.5,f+.5).data,h=g[0],i=g[1],j=g[2],k=g[3],selectedPrimaryColor=context.fillStyle="rgba("+h+", "+i+", "+j+", "+k+")"})},stop:function(a){var b=a.event,c="#"+a.canvasId;$(c).off(b)}},v={start:function(a){var b=a.event||CONSTANTS.Events.mousemove,c="#"+(a.canvasId||CONSTANTS.canvasId),d=null,e=null,f=null,g=null,h=null,i={get:function(){return{X:PivotedLinePattern.VARIABLES.LastPoint.X,Y:PivotedLinePattern.VARIABLES.LastPoint.Y}},set:function(a,b){PivotedLinePattern.VARIABLES.LastPoint.X=a,PivotedLinePattern.VARIABLES.LastPoint.Y=b}},j=null;$(c).on(b,function(a){d={event:a,relativeTo:$(this)},e=Actions.Mouse.getX(d),f=Actions.Mouse.getY(d),j=$("[name=tool-options]:checked").val();var b=function(){g=PivotedLinePattern.VARIABLES.width,h=i.get(),h.X!=-1&&CANVASAPI.drawLineSegmentFromLastPoint({context:context,last:h,current:{X:e,Y:f},width:g}),j===PivotedLinePattern.CONSTANTS.ACTIONS.Xextends&&i.set(0,f),j===PivotedLinePattern.CONSTANTS.ACTIONS.Ydrops&&i.set(e,0),j===PivotedLinePattern.CONSTANTS.ACTIONS.godRays&&i.set(0,0)};void 0!==a.buttons&&(1===a.buttons?b():(i.set(-1,-1),j===PivotedLinePattern.CONSTANTS.ACTIONS.pivots&&i.set(e,f)))})},stop:function(a){var b=a.event||CONSTANTS.Events.mousemove,c="#"+(a.canvasId||CONSTANTS.canvasId);$(c).off(b)},ContextMenu:{activate:function(a){function b(){return r.generateSlider({id:"widthPivotedLinePattern",min:1,max:200,step:1,title:"width for pivoted line pattern tool."})}function c(a){b().attr("value",PivotedLinePattern.VARIABLES.width).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){PivotedLinePattern.VARIABLES.width=$(this).val()}).appendTo(d);d.appendTo($(a.containerSelectionCriterion))}var d=$("<div></div>").attr("id",a.id).addClass("menu-item"),e=function(){var a=function(a,b,c){return r.genericLabel().append(c).append(' <input id="'+a+'" name="'+b+'" type="radio" value="'+c+'" /></label>')};d.append(a("option_pivot","tool-options",PivotedLinePattern.CONSTANTS.ACTIONS.pivots)),d.append(a("option_extends","tool-options",PivotedLinePattern.CONSTANTS.ACTIONS.Xextends)),d.append(a("option_drops","tool-options",PivotedLinePattern.CONSTANTS.ACTIONS.Ydrops)),d.append(a("option_god_rays","tool-options",PivotedLinePattern.CONSTANTS.ACTIONS.godRays))};c(a),e()},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"PivotedLinePatternContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}}},w={start:function(a){function b(a){$("<div></div>").attr("id",Rectangle.CONSTANTS.previewId).css({position:"fixed","z-index":"2"}).appendTo(".utilities").on("click",function(a){var b={event:a,relativeTo:$(c)},d=Actions.Mouse.getX(b),e=Actions.Mouse.getY(b),f=Rectangle.VARIABLES.length,g=Rectangle.VARIABLES.breadth;k=Rectangle.VARIABLES.xyPlaneRotationAngle*Math.PI/180,CANVASAPI.fillRotatedRectangle(d-f/2,e-g/2,f,g,k)}).on("mousemove",function(a){$(this).css("top",a.pageY-Rectangle.VARIABLES.breadth/2-window.scrollY).css("left",a.pageX-Rectangle.VARIABLES.length/2-window.scrollX).css("background-color",selectedPrimaryColor).css("border","thin dashed "+selectedAlternativeColor).css("height",Rectangle.VARIABLES.breadth).css("width",Rectangle.VARIABLES.length),i=$(this).offset().left+Rectangle.VARIABLES.length/2,j=$(this).offset().top+Rectangle.VARIABLES.breadth/2,e=$(c).offset().left,f=$(c).offset().top,(e>i||e+h<i||f>j||f+g<j)&&$(this).hide()})}var c=(a.event,"#"+a.canvasId),d=null,e=$(c).offset().left,f=$(c).offset().top,g=$(c).height(),h=$(c).width(),i=null,j=null,k=null;b(),$(c).on("mousemove",function(a){d=d||$("#"+Rectangle.CONSTANTS.previewId),d.css("top",a.pageY-Rectangle.VARIABLES.breadth/2-window.scrollY).css("left",a.pageX-Rectangle.VARIABLES.length/2-window.scrollX).css("background-color",selectedPrimaryColor).css("height",Rectangle.VARIABLES.breadth).css("width",Rectangle.VARIABLES.length).css("transform","rotate("+parseInt(Rectangle.VARIABLES.xyPlaneRotationAngle*Math.PI)/180+"rad)").show()})},stop:function(a){var b=a.event||CONSTANTS.Events.mouseclick,c="#"+(a.canvasId||CONSTANTS.canvasId);$(c).off(b),$("#"+Rectangle.CONSTANTS.previewId).off("mousemove"),$("#"+Rectangle.CONSTANTS.previewId).remove()},ContextMenu:{activate:function(a){function b(a,b,c,d){return r.generateSlider({id:a,min:d,max:c,step:1,title:b})}function c(a){return b("xyPlaneRotationAngle","rotation angle for XY plane rotation.",360,0).attr("value",Rectangle.VARIABLES.xyPlaneRotationAngle).on("mouseover",function(){$(this).attr("title",$(this).val()+" deg")}).on("input",function(){Rectangle.VARIABLES.xyPlaneRotationAngle=$(this).val()})}function d(a){b(a.lengthId,a.lengthTitle,400,10).attr("value",Rectangle.VARIABLES.length).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){Rectangle.VARIABLES.length=$(this).val()}).appendTo(e),b(a.breadthId,a.breadthTitle,400,10).attr("value",Rectangle.VARIABLES.breadth).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){Rectangle.VARIABLES.breadth=$(this).val()}).appendTo(e)}var e=$("<div></div>").attr("id",a.id).addClass("menu-item");d(a),e.append(c(a)),e.appendTo($(a.containerSelectionCriterion))},deactivate:function(a){function b(a){$("#"+a.lengthId).remove(),$("#"+a.breadthId).remove(),$("#xyPlaneRotationAngle").remove()}b(a),$("#"+Rectangle.CONSTANTS.previewId).off("mousemove"),$("#"+Rectangle.CONSTANTS.previewId).remove()},getOptions:function(){return{tool:this,id:"RectangleContextMenu",lengthId:"lengthRectangle",breadthId:"breadthRectangle",lengthTitle:"length for rectangle",breadthTitle:"breadth for rectangle",containerSelectionCriterion:".contextual-tool-bar"}}}},x={start:function(a){function b(a){var b=$("<div></div>").attr("id",Ring.CONSTANTS.previewOuterId).css({position:"fixed","z-index":"2","border-radius":"50%",height:2*Ring.VARIABLES.outerRadius,width:2*Ring.VARIABLES.outerRadius,"backgruond-color":selectedPrimaryColor}).appendTo(".utilities");$("<div></div>").attr("id",Ring.CONSTANTS.previewId).css({position:"fixed","z-index":"2","border-radius":"50%"}).appendTo(b).on("click",function(a){d={event:a,relativeTo:$(c)},e=Actions.Mouse.getX(d),f=Actions.Mouse.getY(d),g=Ring.VARIABLES.innerRadius,h=Ring.VARIABLES.outerRadius,CANVASAPI.fillRing({X:e,Y:f,innerRadius:g,outerRadius:h,strokeColor:selectedPrimaryColor,fillColor:selectedAlternativeColor})}).on("mousemove",function(a){$(this).css("top",a.pageY-parseInt(Ring.VARIABLES.innerRadius)-parseInt(window.scrollY)).css("left",a.pageX-parseInt(Ring.VARIABLES.innerRadius)-parseInt(window.scrollX)).css("background-color",selectedAlternativeColor).css("border","thin dashed "+selectedPrimaryColor).css("height",2*Ring.VARIABLES.innerRadius).css("width",2*Ring.VARIABLES.innerRadius),p.css({position:"fixed",top:a.pageY-parseInt(Ring.VARIABLES.outerRadius)-parseInt(window.scrollY),left:a.pageX-parseInt(Ring.VARIABLES.outerRadius)-parseInt(window.scrollX),"z-index":"2","border-radius":"50%",height:2*Ring.VARIABLES.outerRadius,width:2*Ring.VARIABLES.outerRadius,"background-color":selectedPrimaryColor}),n=$(this).offset().left+parseInt(Ring.VARIABLES.innerRadius),o=$(this).offset().top+parseInt(Ring.VARIABLES.innerRadius),j=$(c).offset().left,k=$(c).offset().top,(j>n||parseInt(j)+parseInt(m)<n||k>o||parseInt(k)+parseInt(l)<o)&&($(this).hide(),p.hide())})}var c=(a.event||CONSTANTS.Events.mouseclick,"#"+(a.canvasId||CONSTANTS.canvasId)),d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=$(c).height(),m=$(c).width(),n=null,o=null,p=null;b(),$(c).on("mousemove",function(a){i=i||$("#"+Ring.CONSTANTS.previewId),i.css("top",a.pageY-parseInt(Ring.VARIABLES.innerRadius)-parseInt(window.scrollY)).css("left",a.pageX-parseInt(Ring.VARIABLES.innerRadius)-parseInt(window.scrollX)).css("background-color",selectedAlternativeColor).css("height",2*Ring.VARIABLES.innerRadius).css("width",2*Ring.VARIABLES.innerRadius).show(),p=p||$("#"+Ring.CONSTANTS.previewOuterId),p.css({position:"fixed",top:a.pageY-parseInt(Ring.VARIABLES.outerRadius)-parseInt(window.scrollY),left:a.pageX-parseInt(Ring.VARIABLES.outerRadius)-parseInt(window.scrollX),"z-index":"2","border-radius":"50%",height:2*Ring.VARIABLES.outerRadius,width:2*Ring.VARIABLES.outerRadius,"background-color":selectedPrimaryColor}).show()})},stop:function(a){var b=a.event||CONSTANTS.Events.mouseclick,c="#"+(a.canvasId||CONSTANTS.canvasId);$(c).off(b),$("#"+Ring.CONSTANTS.previewId).off("mousemove"),$("#"+Ring.CONSTANTS.previewId).remove(),$("#"+Ring.CONSTANTS.previewOuterId).remove()},ContextMenu:{activate:function(a){function b(a,b){return r.generateSlider({id:a,min:1,max:200,step:1,title:b})}function c(a){var c=$("<div></div>").attr("id",a.id).addClass("menu-item");b("innerRadiusRing","inner radius for ring tool.").attr("value",Ring.VARIABLES.innerRadius).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){Ring.VARIABLES.innerRadius=$(this).val()}).appendTo(c),b("outerRadiusRing","outer radius for ring tool.").attr("value",Ring.VARIABLES.outerRadius).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){Ring.VARIABLES.outerRadius=$(this).val()}).appendTo(c);c.appendTo($(a.containerSelectionCriterion))}c(a)},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"RingContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}}},y={start:function(a){function b(a){$("<div></div>").attr("id",Disc.CONSTANTS.previewId).css({position:"fixed","z-index":"2","border-radius":"50%"}).appendTo(".utilities").on("click",function(a){d={event:a,relativeTo:$(c)},e=Actions.Mouse.getX(d),f=Actions.Mouse.getY(d),g=Disc.VARIABLES.radius,CANVASAPI.fillCirc(e,f,g)}).on("mousemove",function(a){$(this).css("top",a.pageY-Disc.VARIABLES.radius-window.scrollY).css("left",a.pageX-Disc.VARIABLES.radius-window.scrollX).css("background-color",selectedPrimaryColor).css("border","thin dashed "+selectedAlternativeColor).css("height",2*Disc.VARIABLES.radius).css("width",2*Disc.VARIABLES.radius),m=parseInt($(this).offset().left)+parseInt(Disc.VARIABLES.radius),n=parseInt($(this).offset().top)+parseInt(Disc.VARIABLES.radius),i=$(c).offset().left,j=$(c).offset().top,(i>m||parseInt(i)+parseInt(l)<m||j>n||parseInt(j)+parseInt(k)<n)&&$(this).hide()})}var c=(a.event,"#"+a.canvasId),d=null,e=null,f=null,g=null,h=null,i=$(c).offset().left,j=$(c).offset().top,k=$(c).height(),l=$(c).width(),m=null,n=null;b(),$(c).on("mousemove",function(a){h=h||$("#"+Disc.CONSTANTS.previewId),h.css("top",a.pageY-Disc.VARIABLES.radius-window.scrollY).css("left",a.pageX-Disc.VARIABLES.radius-window.scrollX).css("background-color",selectedPrimaryColor).css("height",2*Disc.VARIABLES.radius).css("width",2*Disc.VARIABLES.radius).show()})},stop:function(a){var b=a.event,c="#"+a.canvasId;$(c).off(b),$("#"+Disc.CONSTANTS.previewId).off("mousemove"),$("#"+Disc.CONSTANTS.previewId).remove()},ContextMenu:{activate:function(a){function b(){return r.generateSlider({id:"radiusDisc",min:1,max:200,step:1,title:"radius for disc tool."})}function c(a){var c=$("<div></div>").attr("id",a.id).addClass("menu-item");b().attr("value",Disc.VARIABLES.radius).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){Disc.VARIABLES.radius=$(this).val()}).appendTo(c);c.appendTo($(a.containerSelectionCriterion))}c(a)},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"DiscContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}}},z={start:function(a){function b(a){$("<div></div>").attr("id",Square.CONSTANTS.previewId).css({position:"fixed","z-index":"2"}).appendTo(".utilities").on("click",function(a){var b={event:a,relativeTo:$(c)},d=Actions.Mouse.getX(b),e=Actions.Mouse.getY(b),f=Square.VARIABLES.side,g=Square.VARIABLES.xyPlaneRotationAngle*Math.PI/180;CANVASAPI.fillRoatedSquare(d-f/2,e-f/2,f,g)}).on("mousemove",function(a){$(this).css("top",parseInt(a.pageY)-parseInt(Square.VARIABLES.side/2)-parseInt(window.scrollY)).css("left",parseInt(a.pageX)-parseInt(parseInt(Square.VARIABLES.side/2))-parseInt(window.scrollX)).css("background-color",selectedPrimaryColor).css("border","thin dashed "+selectedAlternativeColor).css("height",Square.VARIABLES.side).css("width",Square.VARIABLES.side),i=parseInt($(this).offset().left)+parseInt(Square.VARIABLES.side/2),j=parseInt($(this).offset().top)+parseInt(Square.VARIABLES.side/2),e=$(c).offset().left,f=$(c).offset().top,(e>i||parseInt(e+h)<i||f>j||parseInt(f+g)<j)&&$(this).hide()})}var c=(a.event||CONSTANTS.Events.mouseclick,"#"+(a.canvasId||CONSTANTS.canvasId)),d=null,e=$(c).offset().left,f=$(c).offset().top,g=$(c).height(),h=$(c).width(),i=null,j=null;b(),$(c).on("mousemove",function(a){d=d||$("#"+Square.CONSTANTS.previewId),d.css("top",a.pageY-parseInt(Square.VARIABLES.side/2)-window.scrollY).css("left",a.pageX-parseInt(Square.VARIABLES.side/2)-window.scrollX).css("background-color",selectedPrimaryColor).css("height",Square.VARIABLES.side).css("width",Square.VARIABLES.side).css("transform","rotate("+parseInt(Square.VARIABLES.xyPlaneRotationAngle*Math.PI)/180+"rad)").show()})},stop:function(a){var b=a.event||CONSTANTS.Events.mouseclick,c="#"+(a.canvasId||CONSTANTS.canvasId);$(c).off(b)},ContextMenu:{activate:function(a){function b(a,b,c,d){return r.generateSlider({id:a,min:d,max:c,step:1,title:b})}function c(a){var b=$("#"+a.id);return 0===b.length?$("<div></div>").attr("id",a.id).addClass("menu-item"):b}function d(a){return b("sideSquare","side length for square tool",200,10).attr("value",Square.VARIABLES.side).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){Square.VARIABLES.side=$(this).val()})}function e(a){return b("xyPlaneRotationAngle","rotation angle for XY plane rotation.",360,0).attr("value",Square.VARIABLES.xyPlaneRotationAngle).on("mouseover",function(){$(this).attr("title",$(this).val()+" deg");
}).on("input",function(){Square.VARIABLES.xyPlaneRotationAngle=$(this).val()})}var f=c(a);d(a).appendTo(f),e(a).appendTo(f),f.appendTo($(a.containerSelectionCriterion))},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a),$("#"+Square.CONSTANTS.previewId).off("mousemove"),$("#"+Square.CONSTANTS.previewId).remove()},getOptions:function(){return{tool:this,id:"SquareToolContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}}},A={start:function(a){function b(a){$("<div></div>").attr("id",Circle.CONSTANTS.previewId).css({position:"fixed","z-index":"2","border-radius":"50%"}).appendTo(".utilities").on("click",function(a){d={event:a,relativeTo:$(c)},e=Actions.Mouse.getX(d),f=Actions.Mouse.getY(d),g=Circle.VARIABLES.innerRadius,h=parseInt(Circle.VARIABLES.innerRadius)+1,CANVASAPI.drawCircle({X:e,Y:f,innerRadius:g,outerRadius:h,strokeColor:selectedPrimaryColor})}).on("mousemove",function(a){$(this).css("top",a.pageY-Circle.VARIABLES.innerRadius-window.scrollY).css("left",a.pageX-Circle.VARIABLES.innerRadius-window.scrollX).css("border","thin solid "+selectedPrimaryColor).css("height",2*Circle.VARIABLES.innerRadius).css("width",2*Circle.VARIABLES.innerRadius),n=parseInt($(this).offset().left)+parseInt(Circle.VARIABLES.innerRadius),o=parseInt($(this).offset().top)+parseInt(Circle.VARIABLES.innerRadius),j=$(c).offset().left,k=$(c).offset().top,(j>n||parseInt(j)+parseInt(m)<n||k>o||parseInt(k)+parseInt(l)<o)&&$(this).hide()})}var c=(a.event||CONSTANTS.Events.mouseclick,"#"+(a.canvasId||CONSTANTS.canvasId)),d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=$(c).height(),m=$(c).width(),n=null,o=null;b(),$(c).on("mousemove",function(a){i=i||$("#"+Circle.CONSTANTS.previewId),i.css("top",a.pageY-Circle.VARIABLES.innerRadius-window.scrollY).css("left",a.pageX-Circle.VARIABLES.innerRadius-window.scrollX).css("border","thin solid "+selectedPrimaryColor).css("height",2*Circle.VARIABLES.innerRadius).css("width",2*Circle.VARIABLES.innerRadius).show()})},stop:function(a){var b=a.event||CONSTANTS.Events.mouseclick,c="#"+(a.canvasId||CONSTANTS.canvasId);$(c).off(b),$("#"+Circle.CONSTANTS.previewId).off("mousemove"),$("#"+Circle.CONSTANTS.previewId).remove()},ContextMenu:{activate:function(a){function b(a,b){return r.generateSlider({id:a,min:1,max:200,step:1,title:b})}function c(a){var c=$("<div></div>").attr("id",a.id).addClass("menu-item"),d=b("radiusCircle","innerRadius for circle tool.").attr("value",Circle.VARIABLES.innerRadius).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){Circle.VARIABLES.innerRadius=$(this).val()});d.appendTo(c),c.appendTo($(a.containerSelectionCriterion))}c(a)},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"CircleContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}}},B={start:function(a){var b=a.event,c="#"+a.canvasId,d=null,e=null,f=null,g=0;$(c).on(b,function(a){for(d={event:a,relativeTo:$(c)},e=Actions.Mouse.getX(d),f=Actions.Mouse.getY(d),g=0;g<PointWalker.VARIABLES.steps;g++)CANVASAPI.fillCirc(e,f,1),e+=Math.random()<.5?-1:1,f-=Math.random()<.5?-1:1})},stop:function(a){$("#"+a.canvasId).off(a.event)},ContextMenu:{activate:function(a){function b(a,b,c,d){return r.generateSlider({id:a,min:b,max:c,step:1,title:d})}function c(a){function c(a){var c=b("pointWalkerSptes","500",a.maxStepsAllowed,"Steps for random point walk generation.").attr("value",PointWalker.VARIABLES.steps).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){PointWalker.VARIABLES.steps=$(this).val()});return c}return r.genericLabel().append(a.stepLabel).append(c(a))}var d=$("<div></div>").attr("id",a.id).addClass("menu-item");d.append(c(a)),d.appendTo($(a.containerSelectionCriterion))},deactivate:function(a){$("#"+a.id).remove()},getOptions:function(){return{tool:this,id:"PointWalkerContextMenu",containerSelectionCriterion:".contextual-tool-bar",maxStepsAllowed:1e5,stepLabel:"Steps: "}}}},C={start:function(a){var b,c,d=a.event,e="#"+a.canvasId,f=null,g=null,h=null,i=0,j=[],k={};$(e).on(d,function(a){function d(a){for(g=a.X,h=a.Y,b=a.steps,c=a.fillColor,i=0;i<b;i++)j[i]={X:g,Y:h},context.fillStyle=c,CANVASAPI.fillCirc(g,h,1),g+=Math.random()<.5?-1:1,h-=Math.random()<.5?-1:1;setTimeout(function(){d(a)},1e3)}f={event:a,relativeTo:$(e)},g=Actions.Mouse.getX(f),h=Actions.Mouse.getY(f),k={X:g,Y:h,steps:FamilyPointWalker.VARIABLES.steps,fillColor:selectedPrimaryColor},setTimeout(function(){d(k)},1e3)})},stop:function(a){$("#"+a.canvasId).off(a.event)},ContextMenu:{activate:function(a){function b(a,b,c,d){return r.generateSlider({id:a,min:b,max:c,step:1,title:d})}function c(a){function c(a){var c=b("familyPointWalkerSptes",FamilyPointWalker.VARIABLES.steps,a.maxStepsAllowed,"Steps for family random point walk generation.").attr("value",FamilyPointWalker.VARIABLES.steps).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){FamilyPointWalker.VARIABLES.steps=$(this).val()});return c}return r.genericLabel().append(a.stepLabel).append(c(a))}var d=$("<div></div>").attr("id",a.id).addClass("menu-item");d.append(c(a)),d.appendTo($(a.containerSelectionCriterion))},deactivate:function(a){$("#"+a.id).remove()},getOptions:function(){return{tool:this,id:"FamilyPointWalkerContextMenu",containerSelectionCriterion:".contextual-tool-bar",maxStepsAllowed:1e5,stepLabel:"Steps: "}}}},D={start:function(a){var b,c,d=a.event,e="#"+a.canvasId,f=null,g=null,h=null,i=0,j=[],k={};$(e).on(d,function(a){function d(a){for(g=a.X,h=a.Y,b=a.steps,c=a.fillColor,i=0;i<b;i++)j[i]={X:g,Y:h},context.fillStyle=c,CANVASAPI.fillCirc(g,h,1),g+=Math.random()<.5?-1:1,h-=Math.random()<.5?-1:1;a.X=g,a.Y=h,setTimeout(function(){d(a)},1e3)}f={event:a,relativeTo:$(e)},g=Actions.Mouse.getX(f),h=Actions.Mouse.getY(f),k={X:g,Y:h,steps:OrganismPointWalker.VARIABLES.steps,fillColor:selectedPrimaryColor},setTimeout(function(){d(k)},1e3)})},stop:function(a){$("#"+a.canvasId).off(a.event)},ContextMenu:{activate:function(a){function b(a,b,c,d){return r.generateSlider({id:a,min:b,max:c,step:1,title:d})}function c(a){function c(a){var c=b("organismPointWalkerSptes",OrganismPointWalker.VARIABLES.steps,a.maxStepsAllowed,"Steps for organism random point walk generation.").attr("value",OrganismPointWalker.VARIABLES.steps).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("change",function(){OrganismPointWalker.VARIABLES.steps=$(this).val()});return c}return r.genericLabel().append(a.stepLabel).append(c(a))}var d=$("<div></div>").attr("id",a.id).addClass("menu-item");d.append(c(a)),d.appendTo($(a.containerSelectionCriterion))},deactivate:function(a){$("#"+a.id).remove()},getOptions:function(){return{tool:this,id:"OrganismPointWalkerContextMenu",containerSelectionCriterion:".contextual-tool-bar",maxStepsAllowed:1e4,stepLabel:"Steps: "}}}},E={start:function(a){var b,c,d=a.event,e="#"+a.canvasId,f=null,g=null,h=null,i={};$(e).on(d,function(a){function d(a){g=Math.floor(a.X),h=Math.floor(a.Y),b=a.steps,c=context.fillStyle,context.fillStyle=a.fillColor,CANVASAPI.fillCirc(g,h,1),context.fillStyle=c,g+=Math.random()<.5?-1:1,h+=Math.random()<.5?-1:1,a.X=g,a.Y=h,setTimeout(function(){d(a)},UniCellularParasiteTool.VARIABLES.durationBetweenParasiticActsInMiliSeconds)}f={event:a,relativeTo:$(e)},g=Actions.Mouse.getX(f),h=Actions.Mouse.getY(f),i={X:g,Y:h,steps:UniCellularParasiteTool.VARIABLES.steps,fillColor:selectedPrimaryColor,i:0},d(i)})},stop:function(a){$("#"+a.canvasId).off(a.event)},ContextMenu:{activate:function(a){},deactivate:function(a){},getOptions:function(){return{tool:this,id:"UniCellularParasiteToolContextMenu"}}}};Object.assign(MandelbrotFractal,s),Object.assign(Pencil,t),Object.assign(PickColor,u),Object.assign(PivotedLinePattern,v),Object.assign(Rectangle,w),Object.assign(Ring,x),Object.assign(Disc,y),Object.assign(Square,z),Object.assign(Circle,A),Object.assign(PointWalker,B),Object.assign(FamilyPointWalker,C),Object.assign(OrganismPointWalker,D),Object.assign(UniCellularParasiteTool,E),MandelbrotFractal.Events.register({toolId:MandelbrotFractal.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:"#"+CONSTANTS.canvasId,start:MandelbrotFractal.start,stop:MandelbrotFractal.stop,toolName:"Mandelbrot fractal"}),r.registerEventForTool({toolId:Pencil.CONSTANTS.selectionId,event:CONSTANTS.Events.mousemove,canvasId:CONSTANTS.canvasId,start:Pencil.start,stop:Pencil.stop,toolName:"Pencil",contextMenu:Pencil.ContextMenu,constantTitle:Pencil.CONSTANTS.title}),r.registerEventForTool({toolId:PickColor.CONSTANTS.selectionId,containerId:PickColor.CONSTANTS.containerId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:PickColor.start,stop:PickColor.stop,toolName:"Color picker",contextMenu:PickColor.ContextMenu,constantTitle:PickColor.CONSTANTS.title}),r.registerEventForTool({toolId:PivotedLinePattern.CONSTANTS.selectionId,event:CONSTANTS.Events.mousemove,canvasId:CONSTANTS.canvasId,start:PivotedLinePattern.start,stop:PivotedLinePattern.stop,toolName:"Pivoted Line Pattern",contextMenu:PivotedLinePattern.ContextMenu,constantTitle:PivotedLinePattern.CONSTANTS.title}),r.registerEventForTool({toolId:Rectangle.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:Rectangle.start,stop:Rectangle.stop,toolName:"Rectangle",contextMenu:Rectangle.ContextMenu,constantTitle:Rectangle.CONSTANTS.title}),r.registerEventForTool({toolId:Ring.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:Ring.start,stop:Ring.stop,toolName:"Ring",contextMenu:Ring.ContextMenu,constantTitle:Ring.CONSTANTS.title}),r.registerEventForTool({toolId:Disc.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:Disc.start,stop:Disc.stop,toolName:"Disc",contextMenu:Disc.ContextMenu,constantTitle:Disc.CONSTANTS.title}),r.registerEventForTool({toolId:Square.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:Square.start,stop:Square.stop,toolName:"Square",contextMenu:Square.ContextMenu,constantTitle:Square.CONSTANTS.title}),r.registerEventForTool({toolId:Circle.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:Circle.start,stop:Circle.stop,toolName:"Circle",contextMenu:Circle.ContextMenu,constantTitle:Circle.CONSTANTS.title}),r.registerEventForTool({toolId:PointWalker.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:PointWalker.start,stop:PointWalker.stop,toolName:"Point Walker",contextMenu:PointWalker.ContextMenu,constantTitle:PointWalker.CONSTANTS.title}),r.registerEventForTool({toolId:OrganismPointWalker.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:OrganismPointWalker.start,stop:OrganismPointWalker.stop,toolName:"Organism Point Walker",contextMenu:OrganismPointWalker.ContextMenu,constantTitle:OrganismPointWalker.CONSTANTS.title}),r.registerEventForTool({toolId:FamilyPointWalker.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:FamilyPointWalker.start,stop:FamilyPointWalker.stop,toolName:"Family Point Walker",contextMenu:FamilyPointWalker.ContextMenu,constantTitle:FamilyPointWalker.CONSTANTS.title}),r.registerEventForTool({toolId:UniCellularParasiteTool.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:UniCellularParasiteTool.start,stop:UniCellularParasiteTool.stop,toolName:"UniCellular Parasite Tool",contextMenu:UniCellularParasiteTool.ContextMenu,constantTitle:UniCellularParasiteTool.CONSTANTS.title}),$("#SaturateRedColorTool").on("click",b),$("#SaturateGreenColorTool").on("click",c),$("#SaturateBlueColorTool").on("click",d),$("#InvertColorsTool").on("click",e),$("#DesaturateRedColorTool").on("click",f),$("#DesaturateGreenColorTool").on("click",g),$("#DesaturateBlueColorTool").on("click",h),$("#AddGrayTool").on("click",i),$("#RemoveGrayTool").on("click",j),$("#AddNoiseTool").on("click",k),$("#RandomColorTool").on("click",l),$("#FuzzyColorTool").on("click",m),$("#BlackAndWhiteColorTool").on("click",n),$("#GrayColorTool").on("click",o),$("#RandomDisksColorTool").on("click",p),$("#RandomCirclesColorTool").on("click",q)});